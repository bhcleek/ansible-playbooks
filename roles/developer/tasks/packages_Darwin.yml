---
- name: add homebrew taps
  homebrew_tap: tap="{{ item }}" state=present
  with_items:
    - caskroom/cask

- name: install packages
  homebrew: name="{{ item }}" state=latest
  with_items:
    - vim
    - tmux
    - git
    - git-lfs
    - git-crypt
    - mercurial
    - python
    - nodejs
    - dash
    - reattach-to-user-namespace
    - jq
    - docker-machine
    - docker-compose
    - ctags
    - direnv
    - tree
    - ffmpeg
    - graphviz
    - parallel
  tags:
    - packages

- name: install packages
  homebrew_cask: name="{{ item }}" state=present
  with_items:
    - docker
    - iterm2
    - slack
    - minikube
  tags:
    - packages

- name: install hyperkit
  get_url:
    url: https://storage.googleapis.com/minikube/releases/{{ minikube_version }}/docker-machine-driver-hyperkit
    dest: /usr/local/bin/docker-machine-driver-hyperkit
    checksum: "{{ minikube_checksum }}"
  tags:
    - packages

# it shouldn't be necessary to do this, but the mode doesn't get set correctly when attempting to use the mode on the get_url task.
- name: set hyperkit perms
  file: path=/usr/local/bin/docker-machine-driver-hyperkit mode=4755 owner=root group=admin
  become: true
