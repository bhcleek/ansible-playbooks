---
- include: packages_{{ ansible_os_family }}.yml
  tags: packages

- name: global npm packages
  npm: name="{{ item }}" global=true production=true state=latest
  with_items:
    - coffee-script
    - bower
    - grunt-cli
  become: "{{ npm_become }}"
  tags:
    - packages

- name: install pip packages
  pip: name="{{ item }}" state=latest extra_args=--user
  with_items:
    - awscli
  become: "{{ pip_become }}"
  tags:
    - packages

- name: create tmux config directory
  file: dest="{{ ansible_env.HOME }}/.config/tmux" state=directory
  tags:
    - conf

- name: tmux.conf
  copy: dest="{{ ansible_env.HOME }}/.tmux.conf" src=tmux.conf backup=yes
  tags:
    - conf

- name: tmux config files
  copy: dest="{{ ansible_env.HOME }}/.config/tmux" src=tmux/ backup=yes
  tags:
    - conf

- name: create bash config directory
  file: dest="{{ ansible_env.HOME }}/.config/bash" state=directory
  tags:
    - conf

- name: bashrc
  copy: dest="{{ ansible_env.HOME }}/.bashrc" src=bashrc backup=yes
  tags:
    - conf

- name: bashrc extensions
  copy: dest="{{ ansible_env.HOME }}/.config/bash" src=bashrc.d/ backup=yes
  tags:
    - conf

- name: bash_profile
  copy: dest="{{ ansible_env.HOME }}/.bash_profile" src=bash_profile backup=yes
  tags:
    - conf

# https://docs.python.org/2/library/site.html
- name: python site-packages directory
  file: dest="{{ ansible_env.HOME }}/Library/Python/2.7/lib/python/site-packages" state=directory
  when: ansible_os_family == 'Darwin'
  tags:
    - conf

- name: python site-packages configuration
  copy: dest="{{ ansible_env.HOME }}/Library/Python/2.7/lib/python/site-packages/homebrew.pth" src=homebrew.pth
  when: ansible_os_family == 'Darwin'

- name: create user font directory
  file: dest="{{ user_font_dir }}" state=directory
  tags:
    - conf

- name: install patched Inconsolata
  copy: dest="{{ user_font_dir }}/Inconsolata for Powerline.otf" src="fonts/Inconsolata/Inconsolata for Powerline.otf"

- name: install go fonts
  copy: dest="{{ user_font_dir }}" src="fonts/go/"

- include: git.yml
  tags:
    - git
    - conf

- include: golang.yml
  tags:
    - packages
    - golang

- include: proto.yml
  tags:
    - packages
    - proto

# virtualbox
# sourcetree
# colloquy
# hipchat

# chrome
# firefox
# firebug
# balsamiq
# IntelliJ
